(function(){app.controller("LayoutCtrl",["$scope","$interval","$http",function(n,t,i){var r;n.appSettings=appSettings;n.appNotifications=[];r=function(){return i.get(n.appSettings.appNotification.url).success(function(t){return angular.forEach(t,function(t){return n.appNotifications.push(t)}),t.length>0?dialog.error("You have "+t.length+" messages."):void 0})};n.appSettings.appNotification.url&&(r(),t(function(){return r()},n.appSettings.appNotification.interval*6e4));n.appMenus=[];n.appSettings.appMenu.url&&i.get(n.appSettings.appMenu.url).success(function(t){return n.appMenus=t,n.appMenus.length>0?n.menuClick(n.appMenus[0],null):void 0});n.onNotificationClick=function(t){return n.appNotifications.splice(n.appNotifications.indexOf(t),1),dialog.alert(t.content,null,{title:t.title})};n.activedMenus=[];n.menuClick=function(t,i){var f,r,e,u;if(t.url&&t.url.indexOf("#")<0){for(u=n.activedMenus,r=0,e=u.length;r<e;r++)f=u[r],f.actived=!1;t.actived=!0;n.activedMenus.indexOf(t)<0&&n.activedMenus.push(t)}if(i&&$(i.target).parents(".with-sidebar-horizontal").length)return i.stopPropagation()};n.search=function(){if(n.searchKeywords)return n.menuClick({text:"Search",url:"/admin/home/search?q="+n.searchKeywords},null)};n.destoryMenu=function(t){return n.activedMenus.splice(n.activedMenus.indexOf(t),1),t.actived?n.activedMenus[0].actived=!0:void 0};n.tools=[{text:"Call Me",icon:"fa fa-phone fa-fw",onclick:function(){return dialog.alert("You clicked `"+this.text+"` tool.")}},{text:"Task",icon:"fa fa-calendar fa-fw",onclick:function(){return dialog.alert("You clicked `"+this.text+"` tool.")}}];n.logout=function(){return dialog.confirm("Are you sure you want to log out?",function(){return dialog.success("Logged out"),location.href="/admin/account/logout"})}}])}).call(this);